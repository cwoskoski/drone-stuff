# DS-002: Flutter Project Setup

**Type:** Task
**Phase:** 1 - Infrastructure
**Status:** Open
**Blocks:** DS-003, DS-004, DS-005, DS-006, DS-007
**Blocked by:** None

## Summary

Replace the existing empty native Android scaffold with a Flutter project. Preserve existing `tools/`, `docs/`, and `.git/` history.

## Steps

1. Backup `tools/`, `docs/`, `.git/`, `.gitignore` to a temp location
2. Clear the project directory (remove native scaffold files)
3. Run `flutter create --org com.example --project-name drone_stuff --platforms android .`
4. Restore `tools/`, `docs/`, `.git/`
5. Merge `.gitignore` â€” combine Flutter defaults with existing patterns:
   - `/missions/` (24GB imagery, already ignored)
   - `tools/backups/*.kmz` (backup files)
6. Update `pubspec.yaml` with all dependencies:
   ```yaml
   flutter_riverpod, go_router, flutter_map, latlong2,
   drift, sqlite3_flutter_libs, xml, archive,
   file_picker, path_provider, path, uuid, intl
   ```
7. Set `minSdkVersion` to 33 in `android/app/build.gradle.kts`
8. Enable AIDL in Android build config (`buildFeatures { aidl = true }`)
9. Verify `flutter run` builds and launches on a connected device

## Acceptance Criteria

- [ ] `flutter run` succeeds on a connected Android 13+ device
- [ ] `tools/push_waypoints.py list` still works (tools/ preserved)
- [ ] `docs/*.kmz` files are present
- [ ] Git history from initial commit is preserved
- [ ] `.gitignore` covers both Flutter and existing patterns
- [ ] All pubspec dependencies resolve (`flutter pub get` succeeds)
